!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("vue")):"function"==typeof define&&define.amd?define(["exports","vue"],n):n((e=e||self).VueHappyBus={},e.vue)}(this,function(e,n){"use strict";const t=new WeakMap,o=new function(){var e=this,n=this;this.on=function(n,t){return e.eventMap.has(n)||e.eventMap.set(n,[]),e.eventMap.get(n).push(t),function(){return e.off(n,t)}},this.once=function(t,o){var f=function e(){n.off(t,e),o.apply(void 0,[].slice.call(arguments))};return e.on(t,f),function(){return e.off(t,f)}},this.emit=function(e){var t=arguments,o=n.eventMap.get(e);Array.isArray(o)&&o.forEach(function(e){"function"==typeof e&&e.apply(void 0,[].slice.call(t,1))})},this.off=function(n,t){if(n)if("function"==typeof t){if(e.eventMap.has(n)){var o=e.eventMap.get(n).filter(function(e){return e!==t});e.eventMap.set(n,o)}}else e.eventMap.delete(n);else e.eventMap.clear()},this.eventMap=new Map},f=new WeakSet,i=e=>{let o=n.getCurrentInstance();if(null===o)return;const i=t.get(o)||t.set(o,[]).get(o);null==i||i.push(e),f.has(o)||(f.add(o),n.onUnmounted(()=>{const e=o&&t.get(o);null==e||e.forEach(e=>e()),o=null},o))},u=o.off;e.$emit=o.emit,e.$off=u,e.$on=(e,n)=>{const t=o.on(e,n);return i(t),t},e.$once=(e,n)=>{const t=o.once(e,n);return i(t),t}});
//# sourceMappingURL=index.umd.js.map
