import{getCurrentInstance as e,onUnmounted as t}from"vue";const n=new WeakMap,o=new function(){var e=this,t=this;this.on=function(t,n){return e.eventMap.has(t)||e.eventMap.set(t,[]),e.eventMap.get(t).push(n),function(){return e.off(t,n)}},this.once=function(n,o){var f=function e(){t.off(n,e),o.apply(void 0,[].slice.call(arguments))};return e.on(n,f),function(){return e.off(n,f)}},this.emit=function(e){var n=arguments,o=t.eventMap.get(e);Array.isArray(o)&&o.forEach(function(e){"function"==typeof e&&e.apply(void 0,[].slice.call(n,1))})},this.off=function(t,n){if(t)if("function"==typeof n){if(e.eventMap.has(t)){var o=e.eventMap.get(t).filter(function(e){return e!==n});e.eventMap.set(t,o)}}else e.eventMap.delete(t);else e.eventMap.clear()},this.eventMap=new Map},f=new WeakSet,i=o=>{let i=e();if(null===i)return;const a=n.get(i)||n.set(i,[]).get(i);null==a||a.push(o),f.has(i)||(f.add(i),t(()=>{const e=i&&n.get(i);null==e||e.forEach(e=>e()),i=null},i))},a=(e,t)=>{const n=o.on(e,t);return i(n),n},r=(e,t)=>{const n=o.once(e,t);return i(n),n},u=o.off,c=o.emit;export{c as $emit,u as $off,a as $on,r as $once};
//# sourceMappingURL=index.modern.js.map
