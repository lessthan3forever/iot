"use strict";var e=require("vue");const t=new WeakMap,n=new function(){var e=this,t=this;this.on=function(t,n){return e.eventMap.has(t)||e.eventMap.set(t,[]),e.eventMap.get(t).push(n),function(){return e.off(t,n)}},this.once=function(n,o){var r=function e(){t.off(n,e),o.apply(void 0,[].slice.call(arguments))};return e.on(n,r),function(){return e.off(n,r)}},this.emit=function(e){var n=arguments,o=t.eventMap.get(e);Array.isArray(o)&&o.forEach(function(e){"function"==typeof e&&e.apply(void 0,[].slice.call(n,1))})},this.off=function(t,n){if(t)if("function"==typeof n){if(e.eventMap.has(t)){var o=e.eventMap.get(t).filter(function(e){return e!==n});e.eventMap.set(t,o)}}else e.eventMap.delete(t);else e.eventMap.clear()},this.eventMap=new Map},o=new WeakSet,r=n=>{let r=e.getCurrentInstance();if(null===r)return;const i=t.get(r)||t.set(r,[]).get(r);null==i||i.push(n),o.has(r)||(o.add(r),e.onUnmounted(()=>{const e=r&&t.get(r);null==e||e.forEach(e=>e()),r=null},r))},i=n.off;exports.$emit=n.emit,exports.$off=i,exports.$on=(e,t)=>{const o=n.on(e,t);return r(o),o},exports.$once=(e,t)=>{const o=n.once(e,t);return r(o),o};
//# sourceMappingURL=index.js.map
