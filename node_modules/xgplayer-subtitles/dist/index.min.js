!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self,t.XgSubtitle=e())}(this,function(){"use strict";function t(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function e(t,e){return e={exports:{}},t(e,e.exports),e.exports}function n(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r}),this.resolve=I(e),this.reject=I(n)}function r(t){var e=t.length;return 3===e?(60*(60*Number(t[0])+Number(t[1]))*1e3+1e3*Number(t[2]))/1e3:2===e?(60*Number(t[0])*1e3+1e3*Number(t[1]))/1e3:Number(t[0])}function i(t){return/^(\-|\+)?\d+(\.\d+)?$/.test(t)}function o(t){return t}function s(t,e){return t>=0&&t<e.length?e[t]:""}function a(t,e){if(!t)return!1;if(t.classList)return Array.prototype.some.call(t.classList,function(t){return t===e});var n=t.className&&"object"===Ke(t.className)?t.getAttribute("class"):t.className;return n&&!!n.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function u(t,e){t&&(t.classList?e.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach(function(e){e&&t.classList.add(e)}):a(t,e)||(t.className&&"object"===Ke(t.className)?t.setAttribute("class",t.getAttribute("class")+" "+e):t.className+=" "+e))}function c(t,e){t&&(t.classList?e.split(/\s+/g).forEach(function(e){t.classList.remove(e)}):a(t,e)&&e.split(/\s+/g).forEach(function(e){var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className&&"object"===Ke(t.className)?t.setAttribute("class",t.getAttribute("class").replace(n," ")):t.className=t.className.replace(n," ")}))}function l(t,e,n){var r=e.length;if(r<1)return-1;if(n=n<0?0:n>=r?r-1:n,e[n].start<=t&&t<e[n].end)return n;for(var i=e[n].end<=t?n+1:0;i<r;i++){if(e[i].start<=t&&t<e[i].end)return i;if(t>e[i].end&&i+1<r&&t<e[i+1].start)return-1;if(t>e[i].end&&i+1>=r)return-1}return-1}function f(t,e,n){var r=e.length;if(r<1)return[];var i=[];if((n=n<0?0:n>=r?r-1:n)<r)for(var o=e[n].end<=t?n:0;o<r&&(e[o].start<=t&&t<e[o].end&&i.push(o),!(t<e[o].start));o++);return i}function h(t){return Object.prototype.toString.call(t).match(/([^\s.*]+)(?=]$)/g)[0]}function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=document.createElement(t);return i.className=r,i.innerHTML=e,br(n).forEach(function(e){var r=e,o=n[e];"video"===t||"audio"===t||"live-video"===t?o&&i.setAttribute(r,o):i.setAttribute(r,o)}),i}function p(){var t=navigator.userAgent,e=/(?:Windows Phone)/.test(t),n=/(?:SymbianOS)/.test(t)||e,r=/(?:Android)/.test(t),i=/(?:Firefox)/.test(t),o=/(?:iPad|PlayBook)/.test(t)||r&&!/(?:Mobile)/.test(t)||i&&/(?:Tablet)/.test(t);return/(?:iPhone)/.test(t)&&!o||r||n||o}function v(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n="";t.map(function(t){n+=" "+e+" "+t.key+" {"+t.style+"}"});var r=document.createElement("style"),i=document.head||document.getElementsByTagName("head")[0];if(r.type="text/css",r.id="ssss",r.styleSheet){var o=function(){try{r.styleSheet.cssText=n}catch(t){}};r.styleSheet.disabled?setTimeout(o,10):o()}else{var s=document.createTextNode(n);r.appendChild(s)}i.appendChild(r)}function y(t,e){Lr||(Lr=new Nr),Lr.addObserver(t,e)}function g(t,e){Lr&&Lr.unObserver(t,e)}function m(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={code:Ir[t].code,msg:Ir[t].msg};return br(e).map(function(t){n[t]=e[t]}),n}function _(t){return new _r(function(e,n){t.list&&e(t),new wr({url:t.url,type:"text"}).then(function(r){Rr.parse(r.res.response,function(r,i){if(i){var o=m(2,i);console.trace(o),n(o,{format:r.format})}else if(r.format)t.list=r.list,t.format=r.format,t.styles=r.styles,e(t);else{var s=m(3);console.trace(s),n(s)}})}).catch(function(t){var e=m(1,{statusText:t.statusText,status:t.status,type:t.type,message:"http load error"});console.trace(e),n(e)})})}function x(t,e){return!!(t.id&&t.id===e.id||t.language&&t.language===e.language)}var b=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t},k=function(t){return Object(b(t))},w={}.hasOwnProperty,T=function(t,e){return w.call(t,e)},S=e(function(t){var e=t.exports={version:"2.6.12"};"number"==typeof __e&&(__e=e)}),O=(S.version,e(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)})),E=e(function(t){var e=O["__core-js_shared__"]||(O["__core-js_shared__"]={});(t.exports=function(t,n){return e[t]||(e[t]=void 0!==n?n:{})})("versions",[]).push({version:S.version,mode:"pure",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})}),P=0,j=Math.random(),M=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++P+j).toString(36))},A=E("keys"),C=function(t){return A[t]||(A[t]=M(t))},R=C("IE_PROTO"),N=Object.prototype,L=Object.getPrototypeOf||function(t){return t=k(t),T(t,R)?t[R]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?N:null},I=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},F=function(t,e,n){if(I(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}},z=function(t){return"object"==typeof t?null!==t:"function"==typeof t},B=function(t){if(!z(t))throw TypeError(t+" is not an object!");return t},D=function(t){try{return!!t()}catch(t){return!0}},H=!D(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),V=O.document,W=z(V)&&z(V.createElement),G=function(t){return W?V.createElement(t):{}},U=!H&&!D(function(){return 7!=Object.defineProperty(G("div"),"a",{get:function(){return 7}}).a}),$=function(t,e){if(!z(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!z(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!z(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!z(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},K=Object.defineProperty,X={f:H?Object.defineProperty:function(t,e,n){if(B(t),e=$(e,!0),B(n),U)try{return K(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},Y=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},J=H?function(t,e,n){return X.f(t,e,Y(1,n))}:function(t,e,n){return t[e]=n,t},q=function(t,e,n){var r,i,o,s=t&q.F,a=t&q.G,u=t&q.S,c=t&q.P,l=t&q.B,f=t&q.W,h=a?S:S[e]||(S[e]={}),d=h.prototype,p=a?O:u?O[e]:(O[e]||{}).prototype;a&&(n=e);for(r in n)(i=!s&&p&&void 0!==p[r])&&T(h,r)||(o=i?p[r]:n[r],h[r]=a&&"function"!=typeof p[r]?n[r]:l&&i?F(o,O):f&&p[r]==o?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(o):c&&"function"==typeof o?F(Function.call,o):o,c&&((h.virtual||(h.virtual={}))[r]=o,t&q.R&&d&&!d[r]&&J(d,r,o)))};q.F=1,q.G=2,q.S=4,q.P=8,q.B=16,q.W=32,q.U=64,q.R=128;var Z=q,Q=function(t,e){var n=(S.Object||{})[t]||Object[t],r={};r[t]=e(n),Z(Z.S+Z.F*D(function(){n(1)}),"Object",r)};Q("getPrototypeOf",function(){return function(t){return L(k(t))}});var tt=S.Object.getPrototypeOf,et=t(e(function(t){t.exports={default:tt,__esModule:!0}})),nt=t(e(function(t,e){e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}})),rt=Math.ceil,it=Math.floor,ot=function(t){return isNaN(t=+t)?0:(t>0?it:rt)(t)},st=J,at={},ut={}.toString,ct=function(t){return ut.call(t).slice(8,-1)},lt=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==ct(t)?t.split(""):Object(t)},ft=function(t){return lt(b(t))},ht=Math.min,dt=function(t){return t>0?ht(ot(t),9007199254740991):0},pt=Math.max,vt=Math.min,yt=function(t,e){return t=ot(t),t<0?pt(t+e,0):vt(t,e)},gt=function(t){return function(e,n,r){var i,o=ft(e),s=dt(o.length),a=yt(r,s);if(t&&n!=n){for(;s>a;)if((i=o[a++])!=i)return!0}else for(;s>a;a++)if((t||a in o)&&o[a]===n)return t||a||0;return!t&&-1}}(!1),mt=C("IE_PROTO"),_t=function(t,e){var n,r=ft(t),i=0,o=[];for(n in r)n!=mt&&T(r,n)&&o.push(n);for(;e.length>i;)T(r,n=e[i++])&&(~gt(o,n)||o.push(n));return o},xt="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),bt=Object.keys||function(t){return _t(t,xt)},kt=H?Object.defineProperties:function(t,e){B(t);for(var n,r=bt(e),i=r.length,o=0;i>o;)X.f(t,n=r[o++],e[n]);return t},wt=O.document,Tt=wt&&wt.documentElement,St=C("IE_PROTO"),Ot=function(){},Et=function(){var t,e=G("iframe"),n=xt.length;for(e.style.display="none",Tt.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),Et=t.F;n--;)delete Et.prototype[xt[n]];return Et()},Pt=Object.create||function(t,e){var n;return null!==t?(Ot.prototype=B(t),n=new Ot,Ot.prototype=null,n[St]=t):n=Et(),void 0===e?n:kt(n,e)},jt=e(function(t){var e=E("wks"),n=O.Symbol,r="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=r&&n[t]||(r?n:M)("Symbol."+t))}).store=e}),Mt=X.f,At=jt("toStringTag"),Ct=function(t,e,n){t&&!T(t=n?t:t.prototype,At)&&Mt(t,At,{configurable:!0,value:e})},Rt={};J(Rt,jt("iterator"),function(){return this});var Nt=function(t,e,n){t.prototype=Pt(Rt,{next:Y(1,n)}),Ct(t,e+" Iterator")},Lt=jt("iterator"),It=!([].keys&&"next"in[].keys()),Ft=function(){return this},zt=function(t,e,n,r,i,o,s){Nt(n,e,r);var a,u,c,l=function(t){if(!It&&t in p)return p[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},f=e+" Iterator",h="values"==i,d=!1,p=t.prototype,v=p[Lt]||p["@@iterator"]||i&&p[i],y=v||l(i),g=i?h?l("entries"):y:void 0,m="Array"==e?p.entries||v:v;if(m&&(c=L(m.call(new t)))!==Object.prototype&&c.next&&Ct(c,f,!0),h&&v&&"values"!==v.name&&(d=!0,y=function(){return v.call(this)}),s&&(It||d||!p[Lt])&&J(p,Lt,y),at[e]=y,at[f]=Ft,i)if(a={values:h?y:l("values"),keys:o?y:l("keys"),entries:g},s)for(u in a)u in p||st(p,u,a[u]);else Z(Z.P+Z.F*(It||d),e,a);return a},Bt=function(t){return function(e,n){var r,i,o=String(b(e)),s=ot(n),a=o.length;return s<0||s>=a?t?"":void 0:(r=o.charCodeAt(s),r<55296||r>56319||s+1===a||(i=o.charCodeAt(s+1))<56320||i>57343?t?o.charAt(s):r:t?o.slice(s,s+2):i-56320+(r-55296<<10)+65536)}}(!0);zt(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=Bt(e,n),this._i+=t.length,{value:t,done:!1})});var Dt=function(t,e){return{value:e,done:!!t}};zt(Array,"Array",function(t,e){this._t=ft(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,Dt(1)):"keys"==e?Dt(0,n):"values"==e?Dt(0,t[n]):Dt(0,[n,t[n]])},"values");at.Arguments=at.Array;for(var Ht=jt("toStringTag"),Vt="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),Wt=0;Wt<Vt.length;Wt++){var Gt=Vt[Wt],Ut=O[Gt],$t=Ut&&Ut.prototype;$t&&!$t[Ht]&&J($t,Ht,Gt),at[Gt]=at.Array}var Kt={f:jt},Xt=Kt.f("iterator"),Yt=e(function(t){t.exports={default:Xt,__esModule:!0}});t(Yt);var Jt=e(function(t){var e=M("meta"),n=X.f,r=0,i=Object.isExtensible||function(){return!0},o=!D(function(){return i(Object.preventExtensions({}))}),s=function(t){n(t,e,{value:{i:"O"+ ++r,w:{}}})},a=function(t,n){if(!z(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!T(t,e)){if(!i(t))return"F";if(!n)return"E";s(t)}return t[e].i},u=function(t,n){if(!T(t,e)){if(!i(t))return!0;if(!n)return!1;s(t)}return t[e].w},c=function(t){return o&&l.NEED&&i(t)&&!T(t,e)&&s(t),t},l=t.exports={KEY:e,NEED:!1,fastKey:a,getWeak:u,onFreeze:c}}),qt=(Jt.KEY,Jt.NEED,Jt.fastKey,Jt.getWeak,Jt.onFreeze,X.f),Zt=function(t){var e=S.Symbol||(S.Symbol={});"_"==t.charAt(0)||t in e||qt(e,t,{value:Kt.f(t)})},Qt={f:Object.getOwnPropertySymbols},te={f:{}.propertyIsEnumerable},ee=function(t){var e=bt(t),n=Qt.f;if(n)for(var r,i=n(t),o=te.f,s=0;i.length>s;)o.call(t,r=i[s++])&&e.push(r);return e},ne=Array.isArray||function(t){return"Array"==ct(t)},re=xt.concat("length","prototype"),ie={f:Object.getOwnPropertyNames||function(t){return _t(t,re)}},oe=ie.f,se={}.toString,ae="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],ue=function(t){try{return oe(t)}catch(t){return ae.slice()}},ce={f:function(t){return ae&&"[object Window]"==se.call(t)?ue(t):oe(ft(t))}},le=Object.getOwnPropertyDescriptor,fe={f:H?le:function(t,e){if(t=ft(t),e=$(e,!0),U)try{return le(t,e)}catch(t){}if(T(t,e))return Y(!te.f.call(t,e),t[e])}},he=Jt.KEY,de=fe.f,pe=X.f,ve=ce.f,ye=O.Symbol,ge=O.JSON,me=ge&&ge.stringify,_e=jt("_hidden"),xe=jt("toPrimitive"),be={}.propertyIsEnumerable,ke=E("symbol-registry"),we=E("symbols"),Te=E("op-symbols"),Se=Object.prototype,Oe="function"==typeof ye&&!!Qt.f,Ee=O.QObject,Pe=!Ee||!Ee.prototype||!Ee.prototype.findChild,je=H&&D(function(){return 7!=Pt(pe({},"a",{get:function(){return pe(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=de(Se,e);r&&delete Se[e],pe(t,e,n),r&&t!==Se&&pe(Se,e,r)}:pe,Me=function(t){var e=we[t]=Pt(ye.prototype);return e._k=t,e},Ae=Oe&&"symbol"==typeof ye.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof ye},Ce=function(t,e,n){return t===Se&&Ce(Te,e,n),B(t),e=$(e,!0),B(n),T(we,e)?(n.enumerable?(T(t,_e)&&t[_e][e]&&(t[_e][e]=!1),n=Pt(n,{enumerable:Y(0,!1)})):(T(t,_e)||pe(t,_e,Y(1,{})),t[_e][e]=!0),je(t,e,n)):pe(t,e,n)},Re=function(t,e){B(t);for(var n,r=ee(e=ft(e)),i=0,o=r.length;o>i;)Ce(t,n=r[i++],e[n]);return t},Ne=function(t,e){return void 0===e?Pt(t):Re(Pt(t),e)},Le=function(t){var e=be.call(this,t=$(t,!0));return!(this===Se&&T(we,t)&&!T(Te,t))&&(!(e||!T(this,t)||!T(we,t)||T(this,_e)&&this[_e][t])||e)},Ie=function(t,e){if(t=ft(t),e=$(e,!0),t!==Se||!T(we,e)||T(Te,e)){var n=de(t,e);return!n||!T(we,e)||T(t,_e)&&t[_e][e]||(n.enumerable=!0),n}},Fe=function(t){for(var e,n=ve(ft(t)),r=[],i=0;n.length>i;)T(we,e=n[i++])||e==_e||e==he||r.push(e);return r},ze=function(t){for(var e,n=t===Se,r=ve(n?Te:ft(t)),i=[],o=0;r.length>o;)!T(we,e=r[o++])||n&&!T(Se,e)||i.push(we[e]);return i};Oe||(st((ye=function(){if(this instanceof ye)throw TypeError("Symbol is not a constructor!");var t=M(arguments.length>0?arguments[0]:void 0),e=function(n){this===Se&&e.call(Te,n),T(this,_e)&&T(this[_e],t)&&(this[_e][t]=!1),je(this,t,Y(1,n))};return H&&Pe&&je(Se,t,{configurable:!0,set:e}),Me(t)}).prototype,"toString",function(){return this._k}),fe.f=Ie,X.f=Ce,ie.f=ce.f=Fe,te.f=Le,Qt.f=ze,Kt.f=function(t){return Me(jt(t))}),Z(Z.G+Z.W+Z.F*!Oe,{Symbol:ye});for(var Be="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),De=0;Be.length>De;)jt(Be[De++]);for(var He=bt(jt.store),Ve=0;He.length>Ve;)Zt(He[Ve++]);Z(Z.S+Z.F*!Oe,"Symbol",{for:function(t){return T(ke,t+="")?ke[t]:ke[t]=ye(t)},keyFor:function(t){if(!Ae(t))throw TypeError(t+" is not a symbol!");for(var e in ke)if(ke[e]===t)return e},useSetter:function(){Pe=!0},useSimple:function(){Pe=!1}}),Z(Z.S+Z.F*!Oe,"Object",{create:Ne,defineProperty:Ce,defineProperties:Re,getOwnPropertyDescriptor:Ie,getOwnPropertyNames:Fe,getOwnPropertySymbols:ze});var We=D(function(){Qt.f(1)});Z(Z.S+Z.F*We,"Object",{getOwnPropertySymbols:function(t){return Qt.f(k(t))}}),ge&&Z(Z.S+Z.F*(!Oe||D(function(){var t=ye();return"[null]"!=me([t])||"{}"!=me({a:t})||"{}"!=me(Object(t))})),"JSON",{stringify:function(t){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=e=r[1],(z(e)||void 0!==t)&&!Ae(t))return ne(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!Ae(e))return e}),r[1]=e,me.apply(ge,r)}}),ye.prototype[xe]||J(ye.prototype,xe,ye.prototype.valueOf),Ct(ye,"Symbol"),Ct(Math,"Math",!0),Ct(O.JSON,"JSON",!0),Zt("asyncIterator"),Zt("observable");var Ge=S.Symbol,Ue=e(function(t){t.exports={default:Ge,__esModule:!0}});t(Ue);var $e=e(function(t,e){function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=n(Yt),i=n(Ue),o="function"==typeof i.default&&"symbol"==typeof r.default?function(t){return typeof t}:function(t){return t&&"function"==typeof i.default&&t.constructor===i.default&&t!==i.default.prototype?"symbol":typeof t};e.default="function"==typeof i.default&&"symbol"===o(r.default)?function(t){return void 0===t?"undefined":o(t)}:function(t){return t&&"function"==typeof i.default&&t.constructor===i.default&&t!==i.default.prototype?"symbol":void 0===t?"undefined":o(t)}}),Ke=t($e),Xe=t(e(function(t,e){e.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}($e);e.default=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":(0,n.default)(e))&&"function"!=typeof e?t:e}}));Z(Z.S+Z.F*!H,"Object",{defineProperty:X.f});var Ye=S.Object,Je=function(t,e,n){return Ye.defineProperty(t,e,n)},qe=e(function(t){t.exports={default:Je,__esModule:!0}});t(qe);var Ze=t(e(function(t,e){e.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(qe);e.default=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),(0,n.default)(t,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()})),Qe=function(t,e){if(B(t),!z(e)&&null!==e)throw TypeError(e+": can't set as prototype!")},tn={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{(n=F(Function.call,fe.f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,r){return Qe(t,r),e?t.__proto__=r:n(t,r),t}}({},!1):void 0),check:Qe};Z(Z.S,"Object",{setPrototypeOf:tn.set});var en=S.Object.setPrototypeOf,nn=e(function(t){t.exports={default:en,__esModule:!0}});t(nn),Z(Z.S,"Object",{create:Pt});var rn=S.Object,on=function(t,e){return rn.create(t,e)},sn=e(function(t){t.exports={default:on,__esModule:!0}});t(sn);var an,un,cn,ln=t(e(function(t,e){function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=n(nn),i=n(sn),o=n($e);e.default=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":(0,o.default)(e)));t.prototype=(0,i.default)(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(r.default?(0,r.default)(t,e):t.__proto__=e)}})),fn=jt("toStringTag"),hn="Arguments"==ct(function(){return arguments}()),dn=function(t,e){try{return t[e]}catch(t){}},pn=function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=dn(e=Object(t),fn))?n:hn?ct(e):"Object"==(r=ct(e))&&"function"==typeof e.callee?"Arguments":r},vn=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t},yn=function(t,e,n,r){try{return r?e(B(n)[0],n[1]):e(n)}catch(e){var i=t.return;throw void 0!==i&&B(i.call(t)),e}},gn=jt("iterator"),mn=Array.prototype,_n=function(t){return void 0!==t&&(at.Array===t||mn[gn]===t)},xn=jt("iterator"),bn=S.getIteratorMethod=function(t){if(void 0!=t)return t[xn]||t["@@iterator"]||at[pn(t)]},kn=e(function(t){var e={},n={},r=t.exports=function(t,r,i,o,s){var a,u,c,l,f=s?function(){return t}:bn(t),h=F(i,o,r?2:1),d=0;if("function"!=typeof f)throw TypeError(t+" is not iterable!");if(_n(f)){for(a=dt(t.length);a>d;d++)if((l=r?h(B(u=t[d])[0],u[1]):h(t[d]))===e||l===n)return l}else for(c=f.call(t);!(u=c.next()).done;)if((l=yn(c,h,u.value,r))===e||l===n)return l};r.BREAK=e,r.RETURN=n}),wn=jt("species"),Tn=function(t,e){var n,r=B(t).constructor;return void 0===r||void 0==(n=B(r)[wn])?e:I(n)},Sn=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)},On=O.process,En=O.setImmediate,Pn=O.clearImmediate,jn=O.MessageChannel,Mn=O.Dispatch,An=0,Cn={},Rn=function(){var t=+this;if(Cn.hasOwnProperty(t)){var e=Cn[t];delete Cn[t],e()}},Nn=function(t){Rn.call(t.data)};En&&Pn||(En=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return Cn[++An]=function(){Sn("function"==typeof t?t:Function(t),e)},an(An),An},Pn=function(t){delete Cn[t]},"process"==ct(On)?an=function(t){On.nextTick(F(Rn,t,1))}:Mn&&Mn.now?an=function(t){Mn.now(F(Rn,t,1))}:jn?(cn=(un=new jn).port2,un.port1.onmessage=Nn,an=F(cn.postMessage,cn,1)):O.addEventListener&&"function"==typeof postMessage&&!O.importScripts?(an=function(t){O.postMessage(t+"","*")},O.addEventListener("message",Nn,!1)):an="onreadystatechange"in G("script")?function(t){Tt.appendChild(G("script")).onreadystatechange=function(){Tt.removeChild(this),Rn.call(t)}}:function(t){setTimeout(F(Rn,t,1),0)});var Ln={set:En,clear:Pn},In=Ln.set,Fn=O.MutationObserver||O.WebKitMutationObserver,zn=O.process,Bn=O.Promise,Dn="process"==ct(zn),Hn={f:function(t){return new n(t)}},Vn=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}},Wn=O.navigator,Gn=Wn&&Wn.userAgent||"",Un=function(t,e){if(B(t),z(e)&&e.constructor===t)return e;var n=Hn.f(t);return(0,n.resolve)(e),n.promise},$n=jt("species"),Kn=jt("iterator"),Xn=!1;try{var Yn=[7][Kn]();Yn.return=function(){Xn=!0},Array.from(Yn,function(){throw 2})}catch(t){}var Jn,qn,Zn,Qn,tr=Ln.set,er=function(){var t,e,n,r=function(){var r,i;for(Dn&&(r=zn.domain)&&r.exit();t;){i=t.fn,t=t.next;try{i()}catch(r){throw t?n():e=void 0,r}}e=void 0,r&&r.enter()};if(Dn)n=function(){zn.nextTick(r)};else if(!Fn||O.navigator&&O.navigator.standalone)if(Bn&&Bn.resolve){var i=Bn.resolve(void 0);n=function(){i.then(r)}}else n=function(){In.call(O,r)};else{var o=!0,s=document.createTextNode("");new Fn(r).observe(s,{characterData:!0}),n=function(){s.data=o=!o}}return function(r){var i={fn:r,next:void 0};e&&(e.next=i),t||(t=i,n()),e=i}}(),nr=O.TypeError,rr=O.process,ir=rr&&rr.versions,or=ir&&ir.v8||"",sr=O.Promise,ar="process"==pn(rr),ur=function(){},cr=qn=Hn.f,lr=!!function(){try{var t=sr.resolve(1),e=(t.constructor={})[jt("species")]=function(t){t(ur,ur)};return(ar||"function"==typeof PromiseRejectionEvent)&&t.then(ur)instanceof e&&0!==or.indexOf("6.6")&&-1===Gn.indexOf("Chrome/66")}catch(t){}}(),fr=function(t){var e;return!(!z(t)||"function"!=typeof(e=t.then))&&e},hr=function(t,e){if(!t._n){t._n=!0;var n=t._c;er(function(){for(var r=t._v,i=1==t._s,o=0;n.length>o;)!function(e){var n,o,s,a=i?e.ok:e.fail,u=e.resolve,c=e.reject,l=e.domain;try{a?(i||(2==t._h&&vr(t),t._h=1),!0===a?n=r:(l&&l.enter(),n=a(r),l&&(l.exit(),s=!0)),n===e.promise?c(nr("Promise-chain cycle")):(o=fr(n))?o.call(n,u,c):u(n)):c(r)}catch(t){l&&!s&&l.exit(),c(t)}}(n[o++]);t._c=[],t._n=!1,e&&!t._h&&dr(t)})}},dr=function(t){tr.call(O,function(){var e,n,r,i=t._v,o=pr(t);if(o&&(e=Vn(function(){ar?rr.emit("unhandledRejection",i,t):(n=O.onunhandledrejection)?n({promise:t,reason:i}):(r=O.console)&&r.error&&r.error("Unhandled promise rejection",i)}),t._h=ar||pr(t)?2:1),t._a=void 0,o&&e.e)throw e.v})},pr=function(t){return 1!==t._h&&0===(t._a||t._c).length},vr=function(t){tr.call(O,function(){var e;ar?rr.emit("rejectionHandled",t):(e=O.onrejectionhandled)&&e({promise:t,reason:t._v})})},yr=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),hr(e,!0))},gr=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw nr("Promise can't be resolved itself");(e=fr(t))?er(function(){var r={_w:n,_d:!1};try{e.call(t,F(gr,r,1),F(yr,r,1))}catch(t){yr.call(r,t)}}):(n._v=t,n._s=1,hr(n,!1))}catch(t){yr.call({_w:n,_d:!1},t)}}};lr||(sr=function(t){vn(this,sr,"Promise","_h"),I(t),Jn.call(this);try{t(F(gr,this,1),F(yr,this,1))}catch(t){yr.call(this,t)}},(Jn=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=function(t,e,n){for(var r in e)n&&t[r]?t[r]=e[r]:J(t,r,e[r]);return t}(sr.prototype,{then:function(t,e){var n=cr(Tn(this,sr));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=ar?rr.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&hr(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),Zn=function(){var t=new Jn;this.promise=t,this.resolve=F(gr,t,1),this.reject=F(yr,t,1)},Hn.f=cr=function(t){return t===sr||t===Qn?new Zn(t):qn(t)}),Z(Z.G+Z.W+Z.F*!lr,{Promise:sr}),Ct(sr,"Promise"),function(t){var e="function"==typeof S[t]?S[t]:O[t];H&&e&&!e[$n]&&X.f(e,$n,{configurable:!0,get:function(){return this}})}("Promise"),Qn=S.Promise,Z(Z.S+Z.F*!lr,"Promise",{reject:function(t){var e=cr(this);return(0,e.reject)(t),e.promise}}),Z(Z.S+!0*Z.F,"Promise",{resolve:function(t){return Un(this===Qn?sr:this,t)}}),Z(Z.S+Z.F*!(lr&&function(t,e){if(!e&&!Xn)return!1;var n=!1;try{var r=[7],i=r[Kn]();i.next=function(){return{done:n=!0}},r[Kn]=function(){return i},t(r)}catch(t){}return n}(function(t){sr.all(t).catch(ur)})),"Promise",{all:function(t){var e=this,n=cr(e),r=n.resolve,i=n.reject,o=Vn(function(){var n=[],o=0,s=1;kn(t,!1,function(t){var a=o++,u=!1;n.push(void 0),s++,e.resolve(t).then(function(t){u||(u=!0,n[a]=t,--s||r(n))},i)}),--s||r(n)});return o.e&&i(o.v),n.promise},race:function(t){var e=this,n=cr(e),r=n.reject,i=Vn(function(){kn(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}}),Z(Z.P+Z.R,"Promise",{finally:function(t){var e=Tn(this,S.Promise||O.Promise),n="function"==typeof t;return this.then(n?function(n){return Un(e,t()).then(function(){return n})}:t,n?function(n){return Un(e,t()).then(function(){throw n})}:t)}}),Z(Z.S,"Promise",{try:function(t){var e=Hn.f(this),n=Vn(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}});var mr=S.Promise,_r=t(e(function(t){t.exports={default:mr,__esModule:!0}}));Q("keys",function(){return function(t){return bt(k(t))}});var xr=S.Object.keys,br=t(e(function(t){t.exports={default:xr,__esModule:!0}})),kr=e(function(t){function e(){}function n(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function r(t,e,r,i,o){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new n(r,i||t,o),u=a?a+e:e;return t._events[u]?t._events[u].fn?t._events[u]=[t._events[u],s]:t._events[u].push(s):(t._events[u]=s,t._eventsCount++),t}function i(t,n){0==--t._eventsCount?t._events=new e:delete t._events[n]}function o(){this._events=new e,this._eventsCount=0}var s=Object.prototype.hasOwnProperty,a="~";Object.create&&(e.prototype=Object.create(null),(new e).__proto__||(a=!1)),o.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)s.call(t,e)&&n.push(a?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},o.prototype.listeners=function(t){var e=a?a+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,i=n.length,o=new Array(i);r<i;r++)o[r]=n[r].fn;return o},o.prototype.listenerCount=function(t){var e=a?a+t:t,n=this._events[e];return n?n.fn?1:n.length:0},o.prototype.emit=function(t,e,n,r,i,o){var s=a?a+t:t;if(!this._events[s])return!1;var u,c,l=this._events[s],f=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,n),!0;case 4:return l.fn.call(l.context,e,n,r),!0;case 5:return l.fn.call(l.context,e,n,r,i),!0;case 6:return l.fn.call(l.context,e,n,r,i,o),!0}for(c=1,u=new Array(f-1);c<f;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var h,d=l.length;for(c=0;c<d;c++)switch(l[c].once&&this.removeListener(t,l[c].fn,void 0,!0),f){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,e);break;case 3:l[c].fn.call(l[c].context,e,n);break;case 4:l[c].fn.call(l[c].context,e,n,r);break;default:if(!u)for(h=1,u=new Array(f-1);h<f;h++)u[h-1]=arguments[h];l[c].fn.apply(l[c].context,u)}}return!0},o.prototype.on=function(t,e,n){return r(this,t,e,n,!1)},o.prototype.once=function(t,e,n){return r(this,t,e,n,!0)},o.prototype.removeListener=function(t,e,n,r){var o=a?a+t:t;if(!this._events[o])return this;if(!e)return i(this,o),this;var s=this._events[o];if(s.fn)s.fn!==e||r&&!s.once||n&&s.context!==n||i(this,o);else{for(var u=0,c=[],l=s.length;u<l;u++)(s[u].fn!==e||r&&!s[u].once||n&&s[u].context!==n)&&c.push(s[u]);c.length?this._events[o]=1===c.length?c[0]:c:i(this,o)}return this},o.prototype.removeAllListeners=function(t){var n;return t?(n=a?a+t:t,this._events[n]&&i(this,n)):(this._events=new e,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=a,o.EventEmitter=o,t.exports=o}),wr=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.url,r=e.method,i=void 0===r?"GET":r,o=e.type,s=void 0===o?"arraybuffer":o,a=e.timeout,u=void 0===a?1e4:a,c=e.data,l=void 0===c?{}:c,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return nt(this,t),new _r(function(t,e){var r=new window.XMLHttpRequest,o=i.toUpperCase(),a=[];s&&(r.responseType=s),u&&(r.timeout=u);for(var c in l)a.push("k="+l[c]);if(r.onload=function(){200===r.status||206===r.status?t({context:f,res:r}):e(new Error({context:f,res:r,type:"error"}))},r.onerror=function(t){e(new Error({context:f,res:r,type:"error"}))},r.ontimeout=function(t){e(new Error({context:f,res:r,type:"error"}))},r.onabort=function(){e(new Error({context:f,res:r,type:"error"}))},"GET"===o)r.open(o,""+n),r.send();else{if("post"!==o)throw new Error("xhr "+o+" is not supported");r.open(o,n),r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.send(a.join("&"))}})},Tr=/^WEBVTT/,Sr=/^STYLE+$/,Or=/^\:\:cue/,Er=/^}+$/,Pr=/^\[Script Info\].*/,jr=[/[0-9]{2}:[0-9]{2}:[0-9]{2}\.[0-9]{3}-->[0-9]{2}:[0-9]{2}:[0-9]{2}\.[0-9]{3}/,/[0-9]{2}:[0-9]{2}\.[0-9]{3}-->[0-9]{2}:[0-9]{2}\.[0-9]{3}/,/[0-9]{2}\.[0-9]{3}-->[0-9]{2}\.[0-9]{3}/],Mr=/^Format:\s/,Ar=/^Style:\s/,Cr=/^Dialogue:\s/,Rr=function(){function t(){nt(this,t)}return Ze(t,null,[{key:"parse",value:function(e,n){var r=t.checkFormat(e);r||n({format:r});try{var i=[];"ass"===r?i=t.parseASS(e):"vtt"===r&&(i=t.parseVTT(e)),n({format:r,list:i.list,styles:i.styles})}catch(t){console.error(t),n({format:r},t)}}},{key:"parseASSItem",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=t.split(","),i={},s="";try{var a=n.length-e.length;return s=a>0?n.splice(e.length-1,a+1).join(",")+"":n[n.length-1]+"",s=s.replace(/\\n+/g,""),s=o(s),n[e.length-1]=s,e.map(function(t,e){"end"===t||"start"===t?i[t]=r(n[e].split(":")):"text"===t?i[t]=[n[e]]:"layer"===t?(i[t]=[n[e]],i.textTag=[n[e]]):i[t]="style"===t?[n[e]]:Number(n[e])?Number(n[e]):n[e]}),i}catch(t){return console.error(t),{}}}},{key:"parseASS",value:function(e){for(var n=e.split("\n"),r=[],i=0,o=0,s=[],a=[],u=null;i<n.length;){if(Mr.test(n[i]))a=(a=n[i].replace(Mr,"").replace(/\s+/g,"").split(",")).map(function(t){return t.toLocaleLowerCase()});else if(Ar.test(n[i]))s.push(n[i].replace(Ar,"").replace(/\s+/g,""));else if(Cr.test(n[i])){var c=t.parseASSItem(n[i].replace(Cr,""),a);if(u&&c.start===u.start&&c.end===u.end)try{var l=u,f=l.text,h=l.textTag,d=l.style;f.push(c.text[0]),h.push(c.textTag[0]),d.push(c.style[0])}catch(t){console.error(t)}else{u=c;var p=null;o%50==0?((p={start:u.start,end:u.end,list:[]}).list.push(u),r.push(p)):((p=r[r.length-1]).end=u.end,p.list.push(u)),o++}}i++}return{list:r,style:{}}}},{key:"parseVTTStyle",value:function(t,e){var n=t.split(":");if(n.length>1){var r=n[0].trim().split("-"),i="";r.length>1?r.map(function(t,e){i+=0===e?t:t.charAt(0).toUpperCase()+t.slice(1)}):i=r[0],e[i]=n[1].trim().replace(/;$/,"")}return e}},{key:"parseVTT",value:function(t){for(var e=(t=t.replace(Tr,"")).split("\n"),n=[],r=0,o=0,a=null,u=null,c=!1,l=!1,f=null,h=null,d=[];r<e.length;){var p=s(r,e).trim();if(!p||c&&i(p))c=!p;else if(Or.test(p)&&Sr.test(s(r-1,e).trim())){l=!0;var v=/\((.+?)\)/g.exec(p);h=v?v[1]:"",f=""}else if(l)Er.test(p)?(d.push({key:h,style:f}),f=null,h=null,l=!1):f+=p;else if(p){c=!1;var y=this.checkIsTime(e[r]);if(y){var g=this.parseVttTime(y);if(!a||g.start!==a.start||g.end!==a.end){(a=g).text=[],a.textTag=[];var m=null;o%50==0?((m={start:a.start,end:a.end,list:[]}).list.push(a),n.push(m)):((m=n[n.length-1]).end=a.end,m.list.push(a)),o++}}else if(a){var _=a,x=_.text,b=_.textTag,k=this.parseVttText(e[r]);0===b.length||u||k.tag&&k.tag!==b[b.length-1]?(x.push(k.text),b.push(k.tag)):x[b.length-1]+=k.text}u=y,c=!1}r++}return{list:n,styles:d}}},{key:"checkIsTime",value:function(t){t=t.replace(/\s+/g,"");for(var e=0,n=null;e<jr.length&&!(n=jr[e].exec(t));)e++;return n?n[0]:null}},{key:"parseVttText",value:function(t){var e=/^(<?.+?>)/g.exec(t),n="",r="default";if(e){r=e[0].replace(/\<|\>|\&/g,"");var i=RegExp("^<"+r+">(([\\s\\S])*?)</"+r+">$").exec(t);i?n=i[1]:(n=t,r="")}else n=t;for(var s=/<(\w+).(\w+)>/g,a=s.exec(n);a&&a.length>2;)n=n.replace(a[0],"<"+a[1]+' class="'+a[2]+'">'),a=s.exec(n);return{tag:r,text:o(n.replace(/\\n+/g,""))}}},{key:"parseVttTime",value:function(t){var e=t.split("--\x3e"),n=void 0,i=0;if(2===e.length){var o=e[0].split(":"),s=e[1].split(":");n=r(o),i=r(s)}return{start:n,end:i,time:t}}},{key:"isVTT",value:function(t){return Tr.test(t)}},{key:"isASS",value:function(t){return Pr.test(t)}},{key:"checkFormat",value:function(t){return t?Tr.test(t)?"vtt":Pr.test(t)?"ass":null:null}}]),t}(),Nr=function(){function t(){var e=this;nt(this,t),this.__handlers=[],window.ResizeObserver&&(this.observer=new window.ResizeObserver(function(t){e.__trigger(t)}))}return Ze(t,[{key:"addObserver",value:function(t,e){if(this.observer){this.observer&&this.observer.observe(t);for(var n=this.__handlers,r=-1,i=0;i<n.length;i++)n[i]&&t===n[i].target&&(r=i);r>-1?this.__handlers[r].handler.push(e):this.__handlers.push({target:t,handler:[e]})}}},{key:"unObserver",value:function(t){var e=-1;this.__handlers.map(function(n,r){t===n.target&&(e=r)}),this.observer&&this.observer.unobserve(t),e>-1&&this.__handlers.splice(e,1)}},{key:"destroyObserver",value:function(){this.observer&&this.observer.disconnect(),this.observer=null,this.__handlers=null}},{key:"__runHandler",value:function(t,e){for(var n=this.__handlers,r=0;r<n.length;r++)if(n[r]&&t===n[r].target){n[r].handler&&n[r].handler.map(function(n){try{n(t,e)}catch(t){console.error(t)}});break}}},{key:"__trigger",value:function(t){var e=this;t.map(function(t){var n=t.contentRect;e.__runHandler(t.target,n)})}}]),t}(),Lr=null;!function(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}('xg-text-track.xg-text-track {\n  font-family: "PingFang SC","SF Pro SC","SF Pro Text","SF Pro Icons","Helvetica Neue","Helvetica","Arial",sans-serif;\n  -webkit-font-smoothing: antialiased;\n  position: absolute;\n  bottom: 0;\n  color: #fff;\n  left: 0;\n  right: 0;\n  pointer-events: none; }\n  xg-text-track.xg-text-track.text-track-no-fitvideo {\n    margin-bottom: 2%; }\n  xg-text-track.xg-text-track.text-track-hide {\n    opacity: 0;\n    visibility: hidden; }\n  xg-text-track.xg-text-track.text-track-show {\n    opacity: 1;\n    visibility: visible; }\n  xg-text-track.xg-text-track xg-text-track-inner {\n    display: block;\n    position: relative;\n    left: 50%;\n    -webkit-transform: translateX(-50%);\n            transform: translateX(-50%);\n    max-width: 92%; }\n  xg-text-track.xg-text-track xg-text-track-span {\n    display: -webkit-box;\n    text-align: center;\n    text-overflow: ellipsis;\n    -webkit-box-orient: vertical;\n    overflow: hidden;\n    padding: 1px 4px;\n    -webkit-line-clamp: 1;\n    line-height: 120%;\n    word-break: break-word; }\n    xg-text-track.xg-text-track xg-text-track-span.text-track-deputy {\n      font-size: 75%; }\n    xg-text-track.xg-text-track xg-text-track-span.text-track-single {\n      -webkit-line-clamp: 1; }\n    xg-text-track.xg-text-track xg-text-track-span.text-track-double {\n      -webkit-line-clamp: 2; }\n    xg-text-track.xg-text-track xg-text-track-span.text-track-three {\n      -webkit-line-clamp: 3; }\n  xg-text-track.xg-text-track.text-track-bg xg-text-track-inner {\n    background-color: rgba(0, 0, 0, .54);\n    border-radius: 2px; }\n  xg-text-track.xg-text-track.text-track-stroke xg-text-track-inner {\n    background-color: none;\n    border-radius: 0;\n    text-shadow: -1px 1px 0 rgba(0, 0, 0, .7), 1px 1px 0 rgba(0, 0, 0, .7), 1px -1px 0 rgba(0, 0, 0, .7), -1px -1px 0 rgba(0, 0, 0, .7); }\n');var Ir=[{code:0,msg:"SUCCESS"},{code:1,msg:"LOAD_ERROR"},{code:2,msg:"PARSER_ERROR"},{code:3,msg:"FORMAT_NOT_SUPPORTED"},{code:4,msg:"ID_OR_LANGUAGE_NOT_EXIST"},{code:5,msg:"PARAMETERS_ERROR"},{code:6,msg:"ABORT"},{code:7,msg:"UNKNOWN"}],Fr={RESIZE:"resize"},zr=!1;return function(t){function e(t){nt(this,e);var n=Xe(this,(e.__proto__||et(e)).call(this));return zr=p(),n.currentText=null,n.textTrack=[],n._cid=-1,n._gid=-1,n._cids=[],n._iId=null,n._iC=0,n.player=null,n.root=null,n.config={line:"double",bottom:0,mode:"stroke",defaultOpen:!1,baseSizeX:49,baseSizeY:28,minSize:16,minMobileSize:13,fitVideo:!0,offsetBottom:2,fontColor:"#fff"},n._ctime=0,n._loadingTrack={},br(n.config).map(function(e){void 0!==t[e]&&null!==t[e]&&(n.config[e]=t[e])}),n._isOpen=n.config.defaultOpen||!1,n._videoMeta={scale:0,videoHeight:0,videoWidth:0,lwidth:0,lheight:0,vWidth:0,vHeight:0,vBottom:0,vLeft:0,marginBottom:0},t.subTitles&&"Array"===h(t.subTitles)?(t.player&&n.attachPlayer(t.player),n.setSubTitles(t.subTitles),n):Xe(n)}return ln(e,t),Ze(e,[{key:"version",get:function(){return"1.0.12"}}]),Ze(e,[{key:"setSubTitles",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=this._isOpen;this.innerRoot&&this.switchOff(),this.currentText=null,e.map(function(e){var n={};br(e).map(function(t){n[t]=e[t]}),n.isDefault&&(t.currentText=n),t.textTrack.push(n)}),this.currentText&&_(this.currentText).then(function(e){t.addStyles(e),n&&t.switch()})}},{key:"addStyles",value:function(t){var e=t.styles,n=t.format;e&&"vtt"===n&&(e.map(function(t){t.key||(t.key="xg-text-track-span")}),v(e,"xg-text-track"))}},{key:"attachPlayer",value:function(t){var e=this;if(t){this.player&&this.detachPlayer();var n=this.config,r=n.fontColor,i=n.mode,o=n.fitVideo;this.player=t,this.root=document.createElement("xg-text-track"),this.root.className="xg-text-track",!this._isOpen&&u(this.root,"text-track-hide"),!o&&u(this.root,"text-track-no-fitvideo"),i&&u(this.root,"text-track-"+i),this.innerRoot=document.createElement("xg-text-track-inner"),this.root.appendChild(this.innerRoot),r&&(this.root.style.color=r),this.currentText&&["language","id","label"].map(function(t){e.root.setAttribute("data-"+t,e.currentText[t]||"")}),this.player.root.appendChild(this.root),["destroy","__onTimeupdate","_onResize"].map(function(t){e[t]=e[t].bind(e)}),this.player.on("destroy",this.destroy),this.player.on("timeupdate",this.__onTimeupdate),y(t.root,this._onResize)}}},{key:"detachPlayer",value:function(){var t=this.player;t&&(t.off("destroy",this.destroy),t.off("timeupdate",this.__onTimeupdate),t.root&&(g(t.root,this._onResize),t.root.removeChild(this.root)),this.innerRoot=null,this.root=null,this.player=null)}},{key:"switch",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:"",language:""};return this._loadingTrack=e,new _r(function(n,r){if(!e.id&&!e.language){if(t.currentText){t._loadingTrack={},t._updateCurrent(t.currentText),t._isOpen=!0,t.show();var i=m(0,{message:"switch default subtitle success"});return void n(i)}var o=m(5,{message:"no default subtitle"});return void r(o)}if(t.currentText&&x(e,t.currentText))t._loadingTrack={},t._updateCurrent(t.currentText),t._isOpen=!0,t.show(),n(m(0));else{for(var s=null,a=0;a<t.textTrack.length;a++)if(x(e,t.textTrack[a])){s=t.textTrack[a];break}if(s)s.list?(t._loadingTrack={},t._updateCurrent(s),t._isOpen=!0,t.show(),n(m(0))):_(s).then(function(e){if(t.addStyles(e),t._loadingTrack.id===s.id||t._loadingTrack.language===e.language)t._loadingTrack={},t._updateCurrent(e),t._isOpen=!0,t.show(),n(m(0));else{var i=m(6,{message:"check _loadingTrack fail id: "+t._loadingTrack.id+"  nextSubtitle:"+e.id});console.trace(i),r(i)}}).catch(function(t){r(t)});else{var u=m(4,new Error("The is no subtitle with id:[{"+e.id+"}] or language:["+e.language+"]"));console.trace(u),r(u)}}})}},{key:"switchOff",value:function(){this._isOpen=!1,this.hide()}},{key:"_updateCurrent",value:function(t){var e=this;this.currentText=t,["language","id","label"].map(function(t){e.root.setAttribute("data-"+t,e.currentText[t]||"")}),this.__remove(this._cids);var n=this.player.currentTime;this._cids=[],this._gid=-1,this._cid=-1,this._update(n)}},{key:"__loadAll",value:function(){this.textTrack.map(function(t){_(t)})}},{key:"getDelCid",value:function(t,e){for(var n=[],r=0;r<t.length;r++)e.includes(t[r])||n.push(t[r]);return n}},{key:"getNewCid",value:function(t,e){for(var n=[],r=0;r<e.length;r++)t.includes(e[r])||n.push(e[r]);return n}},{key:"_update",value:function(t){var e=this,n=l(t,this.currentText.list,this._gid),r=[];if(n>-1&&(r=f(t,this.currentText.list[n].list,this._cid)),r.length<1)return this._cids.length>0&&this.__remove(this._cids),void(this._cids=[]);if(this._cids!==r||n!==this._gid){this._gid=n,this._cid=r[0];var i=this.getDelCid(this._cids,r),o=this.getNewCid(this._cids,r);this._cids=r,this.__remove(i);var s=[];o.map(function(t){var r=e.currentText.list[n].list[t];r.index=t,s.push(r)}),this.__render(s,t)}}},{key:"__onTimeupdate",value:function(){if(this._isOpen){var t=this.player.video,e=t.videoWidth,n=t.videoHeight;!this._videoMeta.scale&&e&&n&&this._onResize(this.player.root);var r=this.player.currentTime;Math.round(Math.abs(1e3*r-this._ctime))<200||(this._ctime=1e3*r,this.currentText&&this.currentText.list&&this._update(r))}}},{key:"_onResize",value:function(t){var e=this._videoMeta;if(t&&t instanceof window.Element||(t=this.player.root),this._iId&&(clearTimeout(this._iId),this._iId=null),!e.scale){if(!this.player.video)return;var n=this.player.video,r=n.videoWidth,i=n.videoHeight;if(!r||!i)return;e.videoWidth=r,e.videoHeight=i,e.scale=parseInt(i/r*100,10)}this.__startResize(t)}},{key:"resize",value:function(t,e){var n=this,r=this.config,i=r.baseSizeX,o=r.baseSizeY,s=r.minMobileSize,a=r.minSize,u=r.fitVideo,c=r.offsetBottom,l=this._videoMeta.scale;this._videoMeta.lwidth=t,this._videoMeta.lheight=e;var f=void 0,h=0;e/t*100>=l?(h=parseInt(l*t,10)/100,f=t):(h=e,f=parseInt(e/l*100,10)),this._videoMeta.vWidth=f,this._videoMeta.vHeight=h;var d=0,p=0;l>120?(d=o,p=parseInt(d*h/1080,10)):(d=i,p=parseInt(d*f/1920,10));var v=zr?s:a,y={fontSize:p=p<v?v:p>d?d:p},g=parseInt((e-h)/2,10),m=parseInt((t-f)/2,10),_=parseInt(h*c,10)/100;this._videoMeta.vBottom=g,this._videoMeta.vLeft=m,this._videoMeta.marginBottom=_,u&&(y.bottom=g+_,y.left=y.right=m),br(y).map(function(t){n.root.style[t]=y[t]+"px"}),this.emit(Fr.RESIZE,{vLeft:m,vBottom:g,marginBottom:_,vWidth:f,vHeight:h,fontSize:p,scale:l})}},{key:"__startResize",value:function(t){var e=this,n=t.getBoundingClientRect(),r=this._videoMeta,i=n.width,o=n.height;if(this._iId&&(clearTimeout(this._iId),this._iId=null),i>0&&o>0&&(i!==r.lwidth||o!==r.lheight))this._iC=0,this.resize(i,o);else{if(this._iC>=5)return void(this._iC=0);this._iC++,this._iId=setTimeout(function(){e.__startResize(t)},50)}}},{key:"__remove",value:function(t){var e=this;if(t&&!(t.length<1)){for(var n=this.innerRoot.children,r=[],i=0;i<n.length;i++){var o=Number(n[i].getAttribute("data-index"));t.includes(o)&&r.push(n[i])}r.map(function(t){e.innerRoot.removeChild(t)})}}},{key:"__render",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.length>0&&e.map(function(e){var n="text-track-"+t.config.line;e.text.map(function(r,i){i>0&&(n+=" text-track-deputy");var o={"data-tag":e.textTag[i],"data-start":e.start,"data-end":e.end,"data-index":e.index};t.innerRoot.appendChild(d("xg-text-track-span",r,o,n))})})}},{key:"show",value:function(){c(this.root,"text-track-hide")}},{key:"hide",value:function(){u(this.root,"text-track-hide"),this.innerRoot.innerHTML=""}},{key:"destroy",value:function(){this.detachPlayer(),this.removeAllListeners(),this.player=null,this.textTrack=null}},{key:"marginBottom",get:function(){var t=this._videoMeta,e=t.bottom,n=t.marginBottom;return this.config.fitVideo?e+n:n}}]),e}(kr)});
//# sourceMappingURL=index.min.js.map
