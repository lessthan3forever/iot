/**
 * amis-ui v2.9.0
 * Copyright 2018-2023 fex
 */

'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var tslib = require('tslib');
var React = require('react');
var amisCore = require('amis-core');
var Transition = require('react-transition-group/Transition');
var Portal = require('react-overlays/Portal');
var icons = require('./icons.js');
var Button = require('./Button.js');

function _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }

var React__default = /*#__PURE__*/_interopDefaultLegacy(React);
var Transition__default = /*#__PURE__*/_interopDefaultLegacy(Transition);
var Portal__default = /*#__PURE__*/_interopDefaultLegacy(Portal);

/**
 * @file PopUp
 * @description
 * @author fex
 */
var _a;
var fadeStyles = (_a = {},
    _a[Transition.ENTERED] = '',
    _a[Transition.EXITING] = 'out',
    _a[Transition.EXITED] = '',
    _a[Transition.ENTERING] = 'in',
    _a);
var PopUp = /** @class */ (function (_super) {
    tslib.__extends(PopUp, _super);
    function PopUp() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.scrollTop = 0;
        return _this;
    }
    PopUp.prototype.componentDidUpdate = function () {
        if (this.props.isShow) {
            this.scrollTop =
                document.body.scrollTop || document.documentElement.scrollTop;
            document.body.style.overflow = 'hidden';
        }
        else {
            document.body.style.overflow = 'auto';
            document.body.scrollTop = this.scrollTop;
        }
    };
    PopUp.prototype.componentWillUnmount = function () {
        document.body.style.overflow = 'auto';
        document.body.scrollTop = this.scrollTop;
    };
    PopUp.prototype.handleClick = function (e) {
        e.stopPropagation();
    };
    PopUp.prototype.render = function () {
        var _this = this;
        var _a = this.props, style = _a.style, title = _a.title, children = _a.children, overlay = _a.overlay, onHide = _a.onHide, onConfirm = _a.onConfirm, ns = _a.classPrefix, cx = _a.classnames, className = _a.className, isShow = _a.isShow, container = _a.container, showConfirm = _a.showConfirm, __ = _a.translate, showClose = _a.showClose, header = _a.header, _b = _a.placement, placement = _b === void 0 ? 'center' : _b, rest = tslib.__rest(_a, ["style", "title", "children", "overlay", "onHide", "onConfirm", "classPrefix", "classnames", "className", "isShow", "container", "showConfirm", "translate", "showClose", "header", "placement"]);
        var outerStyle = tslib.__assign({}, style);
        delete outerStyle.top;
        return (React__default["default"].createElement(Portal__default["default"], { container: container },
            React__default["default"].createElement(Transition__default["default"], { mountOnEnter: true, unmountOnExit: true, in: isShow, timeout: 500, appear: true }, function (status) {
                return (React__default["default"].createElement("div", tslib.__assign({ className: cx("".concat(ns, "PopUp"), className, fadeStyles[status]), style: outerStyle }, rest, { onClick: _this.handleClick }),
                    overlay && (React__default["default"].createElement("div", { className: "".concat(ns, "PopUp-overlay"), onClick: onHide })),
                    React__default["default"].createElement("div", { className: cx("".concat(ns, "PopUp-inner")) },
                        !showConfirm && showClose ? (React__default["default"].createElement("div", { className: cx("".concat(ns, "PopUp-closeWrap")) },
                            header,
                            React__default["default"].createElement("span", { className: cx("PopUp-closeBox"), onClick: onHide },
                                React__default["default"].createElement(icons.Icon, { icon: "close", className: cx('icon', "".concat(ns, "PopUp-close")) })))) : null,
                        showConfirm && (React__default["default"].createElement("div", { className: cx("".concat(ns, "PopUp-toolbar")) },
                            React__default["default"].createElement(Button["default"], { className: cx("".concat(ns, "PopUp-cancel")), level: "text", onClick: onHide }, __('cancel')),
                            title && (React__default["default"].createElement("span", { className: cx("".concat(ns, "PopUp-title")) }, title)),
                            React__default["default"].createElement(Button["default"], { className: cx("".concat(ns, "PopUp-confirm")), level: "text", onClick: onConfirm }, __('confirm')))),
                        React__default["default"].createElement("div", { className: cx("".concat(ns, "PopUp-content"), "justify-".concat(placement)) }, isShow ? children : null),
                        React__default["default"].createElement("div", { className: cx("PopUp-safearea") }))));
            })));
    };
    PopUp.defaultProps = {
        className: '',
        overlay: true,
        isShow: false,
        container: document.body,
        showClose: true,
        onConfirm: function () { }
    };
    return PopUp;
}(React__default["default"].PureComponent));
var PopUp$1 = amisCore.themeable(amisCore.localeable(PopUp));

exports.PopUp = PopUp;
exports["default"] = PopUp$1;
